# 更新日志

## [v1.5.0] - 2025-01-XX 🔄 重大重构

### 🎯 项目重新定位（Breaking Changes）

**核心理念转变**：将项目从"通用神经网络原理教学"重新定位为"神经网络架构的计算解剖台"

#### 与其他项目的明确边界
- **Neural_Network_Math_Explorer**（本项目）：专注于**单个神经元和层级计算细节**
  - 目标用户：想理解 PyTorch/TensorFlow 代码实现的开发者
  - 核心问题："Conv2d(3,64,3) 这一层到底算了什么？有多少参数？"
  
- **Transformer_Explorer**：Transformer 和 Mamba 架构的宏观原理
  - 核心问题："Multi-Head Attention 为什么有效？"
  
- **vision**：通用机器学习数学基础（30+ 数学主题）
  - 核心问题："梯度下降为什么收敛？最优传输是什么？"

---

### ❌ Removed（避免功能重复）

#### 移除的模块
1. **扩散模型模块（diffusion.py）**
   - ❌ 理由：`vision` 项目已有更完整的扩散模型数学推导
   - ✅ 未来可能：仅保留"UNet 架构的参数量分析"

2. **通用数学推导工具**
   - ❌ 理由：梯度下降、优化器原理等属于 `vision` 的职责
   - ✅ 保留：具体层的梯度计算（如 Conv2d 的反向传播）

3. **优化器对比实验**
   - ❌ 理由：`Transformer_Explorer` 已有 AdamW、学习率调度等内容
   - ✅ 保留：参数更新的数值计算演示

---

### 📝 Changed

#### README.md 完全重写
- ✅ 明确项目定位："神经网络架构的计算解剖台"
- ✅ 添加与其他项目的对比表格
- ✅ 强调核心特性：
  1. 逐层计算追踪（真正的"单步调试"）
  2. 参数量/FLOPs 自动计算
  3. 架构对比实验室
  4. 数值稳定性检测
- ✅ 重新规划开发路线图（分 3 个 Phase）
- ✅ 添加"明确的边界"章节（不做什么，专注做什么）

#### 项目标语更新
```
旧：一个面向学者和研究者的交互式工具
新：神经网络架构的计算解剖台 - 不是告诉你"CNN是什么"，
    而是让你看到"Conv2d(3,64,3)这一层到底算了什么"
```

---

### 🔮 Planned（新的发展方向）

#### Phase 1: 清理与重构（v1.5）
- [ ] 完成扩散模型模块移除
- [ ] 完成通用数学工具移除
- [ ] 增强反向传播追踪（逐神经元数值展示）
- [ ] 实现参数量/FLOPs 自动计算器

#### Phase 2: 核心差异化功能（v2.0）
- [ ] **架构对比实验室**
  - CNN (ResNet-18) vs ViT-Tiny
  - RNN vs LSTM vs GRU
  - GCN vs GAT vs GraphSAGE
- [ ] **现代架构组件**
  - Vision Transformer (ViT) 的 Patch Embedding 计算细节
  - ResNet 的梯度流分析（有无残差的对比）
  - BatchNorm vs LayerNorm vs GroupNorm 数值稳定性

#### Phase 3: 高级工程工具（v3.0）
- [ ] 拖拽式网络搭建工作台
- [ ] 内存分析器（前向/反向传播内存追踪）
- [ ] 数值稳定性自动诊断
- [ ] 失败案例博物馆（"100层普通MLP"梯度消失演示）

#### 长期愿景（v4.0+）
- [ ] MoE (Mixture of Experts) 参数量分析
- [ ] 模型剪枝可视化
- [ ] 量化模拟（INT8 vs FP16 vs FP32）
- [ ] 算子融合优化（Conv+BN+ReLU）

---

### 📊 影响范围

#### 文件变更
- `README.md`: 完全重写（从 206 行 → 重新组织结构）
- `CHANGELOG.md`: 添加 v1.5.0 重构说明
- `diffusion.py`: 将被移除（1403 行）
- `app.py`: 将移除扩散模型 tab

#### 功能变更
- 标签页数量：7 个 → 6 个（移除扩散模型）
- 核心聚焦：通用原理 → 计算细节
- 用户群体：深度学习学习者 → PyTorch 开发者/模型优化工程师

---

## [v2.0.0] - 2024-12-05

### 重大更新：扩散模型模块

#### 新增功能
- ✨ **完整的扩散模型实现** (1403行代码)
  - DDPM (Denoising Diffusion Probabilistic Models) 数学原理
  - DDIM (Denoising Diffusion Implicit Models) 加速采样
  - 前向扩散过程可视化
  - 反向去噪过程演示
  - 图像生成功能
  - 2D数据分布扩散可视化
  - Score函数（梯度场）可视化

#### 核心特性

**📚 数学理论标签页**
- 前向扩散过程的马尔可夫链定义
- 重参数化技巧完整推导
- 反向去噪过程的变分下界（ELBO）推导
- 后验分布贝叶斯推导
- DDPM vs DDIM 算法详细对比
- Beta调度策略可视化（linear, cosine, quadratic）

**➡️ 前向扩散标签页**
- 交互式图像加噪过程
- 支持多种输入图案（圆形、数字、渐变等）
- 不同时间步的噪声可视化
- 信噪比统计分析
- 单步扩散详细过程演示

**⬅️ 反向去噪标签页**
- 理想去噪演示（已知真实噪声）
- 逐步去噪过程可视化
- 支持多种目标图案（圆形、方形、三角形、星形）
- 重建误差计算

**🎨 图像生成标签页**
- DDPM标准采样算法
- DDIM加速采样算法（可调节随机性参数η）
- 采样方法对比工具
- 生成过程逐帧可视化
- 实际应用案例介绍（Stable Diffusion、DALL-E等）

**📊 2D可视化标签页**
- Swiss Roll（瑞士卷）数据分布
- Two Moons（双月）分布
- 同心圆分布
- 高斯混合分布
- 扩散动画生成
- Score函数（梯度场）可视化
- 分布统计分析（均值、标准差、相关系数）

#### 技术实现

**DiffusionModel 类**
```python
- 支持三种Beta调度：linear, cosine, quadratic
- q_sample(): 前向扩散采样
- p_sample(): 反向去噪采样
- 完整的α、ᾱ、后验方差计算
```

**SimpleUNet 类**
```python
- 轻量级U-Net架构
- 时间步位置编码
- 适合教学演示
```

**可视化工具**
- Plotly交互式图表
- 热力图、散点图、向量场
- 动画生成功能

### 文档更新

#### README.md 完全重写
- ✅ 移除夸大宣传，采用务实严谨的描述
- ✅ 明确项目目标和适用人群
- ✅ 详细列出当前限制
- ✅ 制定清晰的未来发展路线图
- ✅ 添加 Just For Dream Lab 开发者信息
- ✅ 强调教学和研究目的

**短期计划（3-6个月）**
- Transformer架构模块
- 优化算法增强
- 正则化技术

**中期计划（6-12个月）**
- 注意力机制深度剖析
- GAN生成对抗网络
- VAE变分自编码器
- 强化学习基础

**长期愿景（1年以上）**
- 大语言模型（LLM）原理
- 多模态模型
- 模型压缩与效率
- 可解释性工具
- 交互式论文复现

#### .gitignore 文件创建
- 完整的Python项目忽略规则
- 虚拟环境、IDE配置
- 模型文件、数据集
- 临时文件和日志
- Streamlit配置
- 跨平台支持（MacOS、Windows、Linux）

### 代码改进

**app.py 修改**
```python
# 新增扩散模型导入
from diffusion import diffusion_tab

# 添加第7个标签页
tab7: 🌊 扩散模型

# 重新组织标签页顺序
1. CNN卷积数学
2. GNN图神经网络
3. RNN/LSTM时序网络
4. 扩散模型 ← 新增
5. 数学推导工具
6. 反向传播原理
7. 交互实验室
```

### Bug修复
- 🐛 修复 multiselect 默认值不在选项列表中的错误
- 🐛 优化时间步选择逻辑，确保边界值正确处理

### 测试验证
- ✅ 所有模块导入成功
- ✅ 核心类定义正确
- ✅ Beta调度算法验证通过
- ✅ Streamlit应用启动正常

### 统计数据
- **新增代码**: 1403行（diffusion.py）
- **文档更新**: README.md 从78行扩展到250+行
- **配置文件**: .gitignore 170行
- **标签页数量**: 从6个增加到7个
- **支持的采样算法**: DDPM, DDIM
- **Beta调度策略**: 3种（linear, cosine, quadratic）
- **2D数据分布**: 4种（Swiss Roll, Two Moons, Concentric Circles, Gaussian Mixture）

### 致谢
开发者：Just For Dream Lab

---

## [v1.0.0] - 之前版本

### 已有功能
- CNN卷积神经网络数学原理
- GNN图神经网络
- RNN/LSTM时序网络
- 数学推导工具
- 反向传播原理
- 交互实验室
